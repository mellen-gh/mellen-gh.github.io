<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<button>Поехали</button>
<ol id="values">
  <li>10</li>
  <li>20</li>
  <li>30</li>
</ol>
<ol id="urls">
  <li>https://kodaktor.ru/api/m/</li>
  <li>https://kodaktor.ru/api/MS2/</li>
  <li>https://kodaktor.ru/api/MS3/</li>
</ol>

<script>
  let i = 0;
  const values = [...document.querySelectorAll("#values li")].map(
          (item) => +item.textContent
  );
  const urls = [...document.querySelectorAll("#urls li")].map(
          (item) => item.textContent
  );

  async function FetchFunction(url, res, params) {
    let answer;
    let response = await fetch(url + params + '/' + res)
            .then((response) => response.text())
            .then((data) => {
              let div = document.createElement("div");
              div.innerHTML= data;
              answer = div.querySelector("span").textContent;
            })
    return answer
  };

  function recFunc(callback) {
    const rec = (arr = [], promise = Promise.resolve()) => {
      if (!arr.length) {
        return promise;
      }
      i++;
      const [url, ...restUrls] = arr;
      return promise.then(res => rec(restUrls, FetchFunction(url, res, values[i - 1])));
    }
    rec(urls).then(result => callback(result));
  }


  document.querySelector("button").addEventListener("click", ({target: t}) => {
    try {
      t.textContent = `Загрузка`
      recFunc(result => t.textContent =`Результат: ${result}`)
    } catch {
      t.textContent = `Ошибка`;
    }
  });

</script>
</body>
</html>